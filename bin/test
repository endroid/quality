#!/usr/bin/env bash

set -e

printf "\nRunning CS Fixer ...\n\n"
curl -L https://cs.symfony.com/download/php-cs-fixer-v2.phar -o php-cs-fixer
chmod +x php-cs-fixer
printf "\n"
./php-cs-fixer fix

printf "\nRunning PHPUnit ...\n\n"
curl -L https://phar.phpunit.de/phpunit-6.5.phar -o phpunit
chmod +x phpunit
printf "\n"
./phpunit -c .

printf "\nRunning PHPStan ...\n\n"
curl -L https://github.com/phpstan/phpstan/releases/download/0.11.5/phpstan.phar -o phpstan
chmod +x phpstan
printf "\n"
./phpstan analyse src --level=max
